<!DOCTYPE html>
<html lang="zh-cn" dir="ltr">
    <head><meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'><meta name='description' content="Clash Meta (mihomo) é“¾å¼ä»£ç† å®˜æ–¹æ–‡æ¡£ï¼š dialer-proxy 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 proxies: - name: &#34;ss1&#34; dialer-proxy: dialer ... - name: &#34;ss2&#34; ... proxy-groups: - name: dialer type: select proxies: - ss2 rules: - MATCH,ss1 æŒ‡å®šå½“å‰ proxies é€šè¿‡ dialer-proxy å»ºç«‹ç½‘ç»œè¿æ¥ï¼Œå€¼å¯ä»¥ä¸ºç­–ç•¥ç»„/å‡ºç«™ä»£ç†çš„ name\n">
<title>ä»£ç†</title>

<link rel='canonical' href='https://windovec.github.io/redeem/p/%E4%BB%A3%E7%90%86/'>

<link rel="stylesheet" href="/redeem/scss/style.min.919e2d4f1e21cc10402f961910fcaa3b779273d37c0fab25eece88edcbd5e750.css"><meta property='og:title' content="ä»£ç†">
<meta property='og:description' content="Clash Meta (mihomo) é“¾å¼ä»£ç† å®˜æ–¹æ–‡æ¡£ï¼š dialer-proxy 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 proxies: - name: &#34;ss1&#34; dialer-proxy: dialer ... - name: &#34;ss2&#34; ... proxy-groups: - name: dialer type: select proxies: - ss2 rules: - MATCH,ss1 æŒ‡å®šå½“å‰ proxies é€šè¿‡ dialer-proxy å»ºç«‹ç½‘ç»œè¿æ¥ï¼Œå€¼å¯ä»¥ä¸ºç­–ç•¥ç»„/å‡ºç«™ä»£ç†çš„ name\n">
<meta property='og:url' content='https://windovec.github.io/redeem/p/%E4%BB%A3%E7%90%86/'>
<meta property='og:site_name' content='WindoveC'>
<meta property='og:type' content='article'><meta property='article:section' content='Post' /><meta property='article:published_time' content='2026-01-22T09:05:58&#43;08:00'/><meta property='article:modified_time' content='2026-01-22T09:05:58&#43;08:00'/>
<meta name="twitter:title" content="ä»£ç†">
<meta name="twitter:description" content="Clash Meta (mihomo) é“¾å¼ä»£ç† å®˜æ–¹æ–‡æ¡£ï¼š dialer-proxy 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 proxies: - name: &#34;ss1&#34; dialer-proxy: dialer ... - name: &#34;ss2&#34; ... proxy-groups: - name: dialer type: select proxies: - ss2 rules: - MATCH,ss1 æŒ‡å®šå½“å‰ proxies é€šè¿‡ dialer-proxy å»ºç«‹ç½‘ç»œè¿æ¥ï¼Œå€¼å¯ä»¥ä¸ºç­–ç•¥ç»„/å‡ºç«™ä»£ç†çš„ name\n">
    <link rel="shortcut icon" href="/favicon.ico" />

    </head>
    <body class="
    article-page
    ">
    <script>
        (function() {
            const colorSchemeKey = 'StackColorScheme';
            if(!localStorage.getItem(colorSchemeKey)){
                localStorage.setItem(colorSchemeKey, "auto");
            }
        })();
    </script><script>
    (function() {
        const colorSchemeKey = 'StackColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.documentElement.dataset.scheme = 'dark';
        } else {
            document.documentElement.dataset.scheme = 'light';
        }
    })();
</script>
<div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky ">
    <button class="hamburger hamburger--spin" type="button" id="toggle-menu" aria-label="åˆ‡æ¢èœå•">
        <span class="hamburger-box">
            <span class="hamburger-inner"></span>
        </span>
    </button>

    <header>
        
            
            <figure class="site-avatar">
                <a href="/redeem/">
                
                    
                    
                    
                        
                        <img src="/redeem/img/avatar_hu_f9ee51788a101886.png" width="300"
                            height="300" class="site-logo" loading="lazy" alt="Avatar">
                    
                
                </a>
                
                    <span class="emoji">ğŸ˜¶â€ğŸŒ«ï¸</span>
                
            </figure>
            
        
        
        <div class="site-meta">
            <h1 class="site-name"><a href="/redeem">WindoveC</a></h1>
            <h2 class="site-description">æ¬¢è¿æ¥åˆ°æˆ‘çš„ç½‘ç«™ï¼Œæ­¤åšå®¢ç”± Hugo &amp; Stack æ­å»ºï¼Œä¸»è¦åˆ†äº«æ±‚èŒå’Œæ·±åº¦å­¦ä¹ ç­‰æ–¹é¢çš„å­¦ä¹ ç¬”è®°</h2>
        </div>
    </header><ol class="menu-social">
            
                <li>
                    <a 
                        href='https://github.com/WindoveC'
                        target="_blank"
                        title="GitHub"
                        rel="me"
                    >
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5" />
</svg>



                        
                    </a>
                </li>
            
                <li>
                    <a 
                        href='https://space.bilibili.com/8320103'
                        target="_blank"
                        title="å“”å“©å“”å“©"
                        rel="me"
                    >
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-brand-bilibili"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 10a4 4 0 0 1 4 -4h10a4 4 0 0 1 4 4v6a4 4 0 0 1 -4 4h-10a4 4 0 0 1 -4 -4v-6z" /><path d="M8 3l2 3" /><path d="M16 3l-2 3" /><path d="M9 13v-2" /><path d="M15 11v2" /></svg>
                        
                    </a>
                </li>
            
                <li>
                    <a 
                        href='http://www.coolapk.com/u/1454784'
                        target="_blank"
                        title="é…·å®‰"
                        rel="me"
                    >
                        
                        
                            <svg t="1766422585940" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="11008" width="256" height="256"><path d="M445.493333 46.72c95.733333-13.653333 195.626667 2.613333 281.493334 47.253333 92.373333 47.36 168.16 126.24 211.626666 220.48 46.986667 100.426667 56.16 217.706667 26.24 324.426667-26.24 94.293333-82.826667 180-159.573333 240.8-72.586667 58.133333-162.826667 94.24-255.68 101.013333-116.586667 10.293333-236.32-26.186667-328.053333-98.773333-66.08-51.52-117.546667-121.44-147.893334-199.466667-44.106667-112.48-42.186667-242.133333 5.226667-353.226666 61.866667-149.6 206.026667-261.226667 366.613333-282.506667M270.4 350.08c-61.76 30.453333-102.986667 98.4-99.413333 167.413333 0.693333 66.666667 42.72 130.24 102.933333 158.293334 39.253333 19.04 84.853333 21.173333 127.093333 12.64 49.12-10.293333 90.453333-41.973333 124.8-77.173334 53.6-54.72 86.453333-124.96 129.6-187.36 22.666667 41.173333 45.333333 82.346667 67.786667 123.573334-24.586667-15.786667-46.773333-35.04-72.16-49.653334-16.746667 11.946667-33.28 24.213333-50.186667 35.946667 62.08 49.013333 126.666667 94.826667 190.026667 142.186667 12.96 8.746667 27.84 23.253333 44.64 14.666666 17.6-7.146667 22.613333-30.346667 12.106667-45.44-52.373333-99.466667-108.48-196.906667-163.253334-295.093333-5.653333-13.066667-19.626667-22.773333-34.24-18.56-13.493333 2.133333-20.266667 15.52-27.146666 25.76-32.106667 52.8-61.813333 107.146667-97.44 157.76-33.866667 48.213333-77.12 96.373333-136.586667 110.88-58.026667 15.2-126.026667-14.506667-148.213333-71.68-17.813333-46.133333-2.933333-102.613333 36.533333-132.8 35.946667-29.013333 86.72-31.093333 129.386667-17.653333 42.666667 13.76 76.533333 44.48 110.773333 72.053333 17.493333-12.053333 36-23.146667 50.986667-38.4-44.96-39.84-93.013333-79.306667-151.146667-97.76-48.16-12.64-101.813333-13.12-146.88 10.4z" fill="#ffffff" p-id="11009"></path><path d="M254.29333333 339.28533333c48.07111147-25.088 105.30133333-24.576 156.672-11.09333333 62.00888853 19.6835552 113.26577813 61.78133333 161.22311147 104.27733333-15.98577813 16.27022187-35.72622187 28.10311147-54.38577813 40.96-36.52266667-29.4115552-72.64711147-62.1795552-118.15822187-76.85688853-45.51111147-14.336-99.66933333-12.11733333-138.0124448 18.83022187-42.09777813 32.19911147-57.96977813 92.4444448-38.96888853 141.65333333 23.66577813 60.98488853 96.19911147 92.672 158.09422186 76.45866667 63.43111147-15.47377813 109.568-66.8444448 145.6924448-118.272 38.00177813-53.9875552 69.68888853-111.95733333 103.936-168.27733334 7.33866667-10.92266667 14.5635552-25.20177813 28.95644374-27.47733333 15.5875552-4.49422187 30.4924448 5.8595552 36.52266666 19.79733333 58.42488853 104.7324448 118.272 208.6684448 174.1368896 314.76622187 11.20711147 16.0995552 5.8595552 40.84622187-12.91377813 48.46933333-17.92 9.15911147-33.792-6.31466667-47.616-15.64444373-67.584-50.51733333-136.4764448-99.38488853-202.69511147-151.66577813 18.03377813-12.5155552 35.66933333-25.6 53.5324448-38.34311147 27.07911147 15.5875552 50.74488853 36.1244448 76.97066667 52.96355627-23.95022187-43.97511147-48.128-87.89333333-72.30577813-131.81155627-46.02311147 66.56-81.06666667 141.48266667-138.24 199.85066667-36.6364448 37.54666667-80.72533333 71.33866667-133.12 82.31822293-45.056 9.10222187-93.696 6.82666667-135.56622187-13.48266667-64.2275552-29.9235552-109.056-97.73511147-109.7955552-168.84622293-3.8115552-73.61422187 40.1635552-146.09066667 106.04088853-178.57422187z" fill="#333333" p-id="11010"></path></svg>
                        
                    </a>
                </li>
            
        </ol><ol class="menu" id="main-menu">
        
        
        
        <li >
            <a href='/redeem/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <polyline points="5 12 3 12 12 3 21 12 19 12" />
  <path d="M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7" />
  <path d="M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6" />
</svg>



                
                <span>ä¸»é¡µ</span>
            </a>
        </li>
        
        
        <li >
            <a href='/redeem/%E5%85%B3%E4%BA%8E/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="7" r="4" />
  <path d="M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2" />
</svg>



                
                <span>å…³äº</span>
            </a>
        </li>
        
        
        <li >
            <a href='/redeem/archives/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <rect x="3" y="4" width="18" height="4" rx="2" />
  <path d="M5 8v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-10" />
  <line x1="10" y1="12" x2="14" y2="12" />
</svg>



                
                <span>å½’æ¡£</span>
            </a>
        </li>
        
        
        <li >
            <a href='/redeem/search/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="10" cy="10" r="7" />
  <line x1="21" y1="21" x2="15" y2="15" />
</svg>



                
                <span>æœç´¢</span>
            </a>
        </li>
        
        
        <li >
            <a href='/redeem/%E9%93%BE%E6%8E%A5/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5" />
  <path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5" />
</svg>



                
                <span>é“¾æ¥</span>
            </a>
        </li>
        
        <li class="menu-bottom-section">
            <ol class="menu">
                    
                        <li id="i18n-switch">  
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-language" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M4 5h7" />
  <path d="M9 3v2c0 4.418 -2.239 8 -5 8" />
  <path d="M5 9c-.003 2.144 2.952 3.908 6.7 4" />
  <path d="M12 20l4 -9l4 9" />
  <path d="M19.1 18h-6.2" />
</svg>



                            <select name="language" title="language" onchange="window.location.href = this.selectedOptions[0].value">
                                
                                    <option value="https://windovec.github.io/redeem/" selected>ç®€ä½“ä¸­æ–‡</option>
                                
                                    <option value="https://windovec.github.io/redeem/en/" >English</option>
                                
                            </select>
                        </li>
                    
                

                
                    <li id="dark-mode-toggle">
                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="8" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="16" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                        <span>æš—è‰²æ¨¡å¼</span>
                    </li>
                
            </ol>
        </li>
    </ol>
</aside>

    <aside class="sidebar right-sidebar sticky">
        
            
                
    <section class="widget archives">
        <div class="widget-icon">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <line x1="5" y1="9" x2="19" y2="9" />
  <line x1="5" y1="15" x2="19" y2="15" />
  <line x1="11" y1="4" x2="7" y2="20" />
  <line x1="17" y1="4" x2="13" y2="20" />
</svg>



        </div>
        <h2 class="widget-title section-title">ç›®å½•</h2>
        
        <div class="widget--toc">
            <nav id="TableOfContents">
  <ol>
    <li><a href="#clash-meta-mihomo">Clash Meta (mihomo)</a>
      <ol>
        <li><a href="#é“¾å¼ä»£ç†">é“¾å¼ä»£ç†</a>
          <ol>
            <li><a href="#å®˜æ–¹æ–‡æ¡£-dialer-proxy">å®˜æ–¹æ–‡æ¡£ï¼š dialer-proxy</a></li>
            <li><a href="#äººè¯">äººè¯</a></li>
            <li><a href="#è¦†å†™">è¦†å†™</a></li>
            <li><a href="#å¼ƒç½®æ–¹æ³•proxy-group">å¼ƒç½®æ–¹æ³•ï¼šproxy-group</a></li>
          </ol>
        </li>
        <li><a href="#è„šæœ¬">è„šæœ¬</a>
          <ol>
            <li><a href="#æ·»åŠ å‡ºç«™ä»£ç†">æ·»åŠ å‡ºç«™ä»£ç†</a></li>
          </ol>
        </li>
      </ol>
    </li>
    <li><a href="#singbox">SingBox</a>
      <ol>
        <li><a href="#é“¾å¼ä»£ç†-1">é“¾å¼ä»£ç†</a>
          <ol>
            <li><a href="#è„šæœ¬ç”Ÿæˆ">è„šæœ¬ç”Ÿæˆ</a></li>
          </ol>
        </li>
      </ol>
    </li>
  </ol>
</nav>
        </div>
    </section>

            
        
    </aside>


            <main class="main full-width">
    <article class="main-article">
    <header class="article-header">

    <div class="article-details">
    

    <div class="article-title-wrapper">
        <h2 class="article-title">
            <a href="/redeem/p/%E4%BB%A3%E7%90%86/">ä»£ç†</a>
        </h2>
    
        
    </div>

    
    
    
    
    <footer class="article-time">
        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M11.795 21h-6.795a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v4" />
  <circle cx="18" cy="18" r="4" />
  <path d="M15 3v4" />
  <path d="M7 3v4" />
  <path d="M3 11h16" />
  <path d="M18 16.496v1.504l1 1" />
</svg>
                <time class="article-time--published" datetime='2026-01-22T09:05:58&#43;08:00'>Jan 22, 2026</time>
            </div>
        

        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <polyline points="12 7 12 12 15 15" />
</svg>



                <time class="article-time--reading">
                    é˜…è¯»æ—¶é•¿: 8 åˆ†é’Ÿ
                </time>
            </div>
        
    </footer>
    

    
</div>

</header>

    <section class="article-content">
    
    
    <h2 id="clash-meta-mihomo">Clash Meta (mihomo)
</h2><h3 id="é“¾å¼ä»£ç†">é“¾å¼ä»£ç†
</h3><h4 id="å®˜æ–¹æ–‡æ¡£-dialer-proxy">å®˜æ–¹æ–‡æ¡£ï¼š dialer-proxy
</h4><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">proxies</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl">- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;ss1&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">dialer-proxy</span><span class="p">:</span><span class="w"> </span><span class="l">dialer</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="l">...</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl">- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;ss2&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="l">...</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="nt">proxy-groups</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl">- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">dialer</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l">select</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">proxies</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="l">ss2</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="nt">rules</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="l">MATCH,ss1</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>æŒ‡å®šå½“å‰ <code>proxies</code> é€šè¿‡ <code>dialer-proxy</code> å»ºç«‹ç½‘ç»œè¿æ¥ï¼Œå€¼å¯ä»¥ä¸º<a class="link" href="https://github.com/MetaCubeX/Meta-Docs/blob/main/docs/config/proxy-groups/index.md"  target="_blank" rel="noopener"
    >ç­–ç•¥ç»„</a>/<a class="link" href="https://github.com/MetaCubeX/Meta-Docs/blob/main/docs/config/proxies/index.md"  target="_blank" rel="noopener"
    >å‡ºç«™ä»£ç†</a>çš„ <code>name</code></p>
<p>ä¸Šè¿°ç¤ºä¾‹ä¸­ï¼Œss1 é€šè¿‡ ss2 å»ºç«‹è¿æ¥</p>
<p>å½“é€šè¿‡ ss1 ä»£ç†æ—¶ï¼Œå°±ç»„æˆäº†ä¸€æ¡ <code>å…§æ ¸ ---ss1--&gt; ss2åŒ…è£å™¨ ===ss2==&gt; ss2æœå‹™ç«¯ ---ss1--&gt; ss1æœå‹™ç«¯ --&gt; ç›®æ ‡</code> çš„ä»£ç†é“¾</p>
<p>æœ€ç»ˆè¡¨ç°ï¼š</p>
<ul>
<li>æµè§ˆå™¨è®¿é—®IPæŸ¥è¯¢ç½‘ç«™æ—¶åªä¼šæ˜¾ç¤ºss1çš„IPï¼ˆå³ç›®æ ‡ç½‘ç«™ä¸çŸ¥é“ss2çš„å­˜åœ¨ï¼‰</li>
<li>å†…æ ¸å¯¹å¤–çœ‹èµ·æ¥åªæ˜¯åœ¨è®¿é—®ss2ï¼ˆå³ä½ çš„å®½å¸¦è¿è¥å•†ä¸çŸ¥é“ss1çš„å­˜åœ¨ï¼‰</li>
<li>åªæœ‰ss2çš„æœåŠ¡ç«¯çŸ¥é“åœ¨è®¿é—®ss1ï¼ˆss2çš„æœåŠ¡ç«¯ä¹ŸåªçŸ¥é“åœ¨è®¿é—®ss1ï¼Œå¹¶ä¸çŸ¥é“åœ¨è®¿é—®ä»€ä¹ˆç›®æ ‡ç½‘ç«™ï¼‰</li>
</ul>
<p><strong>1 å¸¸è§å®ä¾‹</strong></p>
<p><strong>1.1 é€šè¿‡è®¢é˜…èŠ‚ç‚¹ä¸­è½¬è‡ªå·±çš„VPSè½åœ°</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">proxies</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl">- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;ss1&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">dialer-proxy</span><span class="p">:</span><span class="w"> </span><span class="l">dialer</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="l">...</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="nt">proxy-providers</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">provider1</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l">http</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">url</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;http://test.com&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="nt">proxy-groups</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl">- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">dialer</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l">select</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">use</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="l">provider1</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="nt">rules</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="l">MATCH,ss1</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>è¿™é‡Œå°†è®¢é˜…åœ°å€å¡«å…¥provider1ä¸­ï¼Œå°†ä½ è‡ªå·±VPSä¸­æ­å»ºçš„èŠ‚ç‚¹å¡«å…¥ss1ä¸­å³å¯ï¼Œæ­¤æ—¶é€šè¿‡æµè§ˆå™¨è®¿é—®æ—¶æ˜¾ç¤ºçš„æ˜¯ss1çš„IP</p>

            <link rel="stylesheet" href="/redeem/css/vendors/admonitions.a5128328e65b14e9af1bfc5d96ffbcc40978b6d81dbeecb7f70959b501ee715c.css" integrity="sha256-pRKDKOZbFOmvG/xdlv&#43;8xAl4ttgdvuy39wlZtQHucVw=" crossorigin="anonymous">
    <div class="admonition note">
      <div class="admonition-header"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path d="M0 64C0 28.7 28.7 0 64 0L224 0l0 128c0 17.7 14.3 32 32 32l128 0 0 125.7-86.8 86.8c-10.3 10.3-17.5 23.1-21 37.2l-18.7 74.9c-2.3 9.2-1.8 18.8 1.3 27.5L64 512c-35.3 0-64-28.7-64-64L0 64zm384 64l-128 0L256 0 384 128zM549.8 235.7l14.4 14.4c15.6 15.6 15.6 40.9 0 56.6l-29.4 29.4-71-71 29.4-29.4c15.6-15.6 40.9-15.6 56.6 0zM311.9 417L441.1 287.8l71 71L382.9 487.9c-4.1 4.1-9.2 7-14.9 8.4l-60.1 15c-5.5 1.4-11.2-.2-15.2-4.2s-5.6-9.7-4.2-15.2l15-60.1c1.4-5.6 4.3-10.8 8.4-14.9z"/></svg>
        <span>Note</span>
      </div>
      <div class="admonition-content">
        <p>æ²¡æœ‰ç‰¹æ®Šéœ€æ±‚çš„æƒ…å†µä¸‹ï¼Œåœ¨è‡ªå·±è¢«ä¸­è½¬çš„VPSè½åœ°ä¸­æ­å»ºçš„èŠ‚ç‚¹è¯·å‹¿é€‰æ‹©ä»»ä½•udpç±»åè®®å¦‚hy2/tuic/wgï¼Œä»¥åŠå¸¦æœ‰tlsä¼ªè£…ç±»åè®®å¦‚reality/shadowtlsï¼Œæ‚¨çš„è®¢é˜…èŠ‚ç‚¹å¯èƒ½ä¸èƒ½æ­£å¸¸é€šè¿‡è¿™äº›åè®®ï¼Œè¿™é‡Œå»ºè®®é€‰æ‹©æœ€ç®€å•çš„ss aeadæˆ–è€…vmessåè®®</p>
      </div>
    </div><p><strong>1.2 é€šè¿‡ç‰¹å®šsocksè¿æ¥è®¢é˜…èŠ‚ç‚¹</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">proxies</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl">- {<span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;socks1&#34;</span><span class="nt">, type</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;socks&#34;</span><span class="w"> </span>}<span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="nt">proxy-providers</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">provider1</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l">http</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">url</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;http://test.com&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">override</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">dialer-proxy</span><span class="p">:</span><span class="w"> </span><span class="l">socks1</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="nt">proxy-groups</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl">- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">select1</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l">select</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">use</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="l">provider1</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="nt">rules</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="l">MATCH,select1</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>è¯¥å®ä¾‹é€‚ç”¨äºéœ€è¦é€šè¿‡ä¸€ä¸ªç‰¹å®šsocksæ‰èƒ½è®¿é—®å¤–ç½‘çš„æƒ…å†µï¼ˆå¦‚å†…å¤–ç½‘éš”ç¦»ç¯å¢ƒï¼‰ï¼Œå°†ç¯å¢ƒæä¾›çš„socksé…ç½®å¡«å…¥socks1ï¼Œå°†è®¢é˜…åœ°å€å¡«å…¥provider1ä¸­ï¼Œæ­¤æ—¶é€šè¿‡æµè§ˆå™¨è®¿é—®æ—¶æ˜¾ç¤ºçš„æ˜¯è®¢é˜…ä¸­èŠ‚ç‚¹çš„IP</p>

    <div class="admonition note">
      <div class="admonition-header"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path d="M0 64C0 28.7 28.7 0 64 0L224 0l0 128c0 17.7 14.3 32 32 32l128 0 0 125.7-86.8 86.8c-10.3 10.3-17.5 23.1-21 37.2l-18.7 74.9c-2.3 9.2-1.8 18.8 1.3 27.5L64 512c-35.3 0-64-28.7-64-64L0 64zm384 64l-128 0L256 0 384 128zM549.8 235.7l14.4 14.4c15.6 15.6 15.6 40.9 0 56.6l-29.4 29.4-71-71 29.4-29.4c15.6-15.6 40.9-15.6 56.6 0zM311.9 417L441.1 287.8l71 71L382.9 487.9c-4.1 4.1-9.2 7-14.9 8.4l-60.1 15c-5.5 1.4-11.2-.2-15.2-4.2s-5.6-9.7-4.2-15.2l15-60.1c1.4-5.6 4.3-10.8 8.4-14.9z"/></svg>
        <span>Note</span>
      </div>
      <div class="admonition-content">
        <p>è¿™é‡Œåªæ˜¯ç¤ºèŒƒäº†dialer-proxyçš„ç›¸å…³é…ç½®ï¼Œæ‚¨å¯èƒ½è¿˜éœ€è¦æ›´å¤šçš„é…ç½®æ‰èƒ½ä¿è¯è®¢é˜…ä¸‹è½½ï¼Œdnsè§£æç­‰æµç¨‹åŒæ ·é€šè¿‡è¯¥socks</p>
      </div>
    </div><p><strong>2 relayè¿ç§»</strong></p>
<p>relayç±»å‹çš„proxy-groupå°†è¢«åºŸå¼ƒï¼Œè€Œproxy-groupå¹¶ä¸ç›´æ¥æ”¯æŒdialer-proxyï¼Œå› æ­¤é’ˆå¯¹éƒ¨åˆ†ä½¿ç”¨åœºæ™¯ï¼Œç»™å‡ºå‚è€ƒæ–¹æ¡ˆ</p>
<p><strong>2.1 relayä¸­åŒ…å«å¤šä¸ªselect</strong></p>
<p>æœ‰å¦‚ä¸‹é…ç½®</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">proxies</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- {<span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;proxy1&#34;</span><span class="nt">, type</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;socks&#34;</span><span class="w"> </span>}<span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- {<span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;proxy2&#34;</span><span class="nt">, type</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;socks&#34;</span><span class="w"> </span>}<span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- {<span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;proxy3&#34;</span><span class="nt">, type</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;socks&#34;</span><span class="w"> </span>}<span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- {<span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;proxy4&#34;</span><span class="nt">, type</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;socks&#34;</span><span class="w"> </span>}<span class="w">
</span></span></span><span class="line"><span class="cl"><span class="nt">proxy-groups</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- {<span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;relay-proxy&#34;</span><span class="nt">, type: relay, proxies</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&#34;select1&#34;</span><span class="p">,</span><span class="w"> </span><span class="s2">&#34;select2&#34;</span><span class="p">]</span><span class="w"> </span>}<span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- {<span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;select1&#34;</span><span class="nt">, type: select, proxies</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&#34;proxy1&#34;</span><span class="p">,</span><span class="w"> </span><span class="s2">&#34;proxy2&#34;</span><span class="p">]</span><span class="w"> </span>}<span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- {<span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;select2&#34;</span><span class="nt">, type: select, proxies</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&#34;proxy3&#34;</span><span class="p">,</span><span class="w"> </span><span class="s2">&#34;proxy4&#34;</span><span class="p">]</span><span class="w"> </span>}<span class="w">
</span></span></span><span class="line"><span class="cl"><span class="nt">rules</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="l">MATCH,relay-proxy</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>è¿ç§»åˆ°dialer-proxyæ–¹æ¡ˆæ—¶ï¼Œéœ€è¦å°†proxy3å’Œproxy4å®šä¹‰åˆ°proxy-providerä¸­ï¼Œå¹¶é€šè¿‡overrideè®¾ç½®è¯¥providerä¸­æ‰€æœ‰proxyçš„dialer-proxyï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">proxies</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- {<span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;proxy1&#34;</span><span class="nt">, type</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;socks&#34;</span><span class="w"> </span>}<span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- {<span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;proxy2&#34;</span><span class="nt">, type</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;socks&#34;</span><span class="w"> </span>}<span class="w">
</span></span></span><span class="line"><span class="cl"><span class="nt">proxy-groups</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- {<span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;select1&#34;</span><span class="nt">, type: select, proxies</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&#34;proxy1&#34;</span><span class="p">,</span><span class="w"> </span><span class="s2">&#34;proxy2&#34;</span><span class="p">]</span><span class="w"> </span>}<span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- {<span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;select2&#34;</span><span class="nt">, type: select, use</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&#34;provider1&#34;</span><span class="p">]</span><span class="w"> </span>}<span class="w">
</span></span></span><span class="line"><span class="cl"><span class="nt">proxy-providers</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">provider1</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l">inline</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">override</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">dialer-proxy</span><span class="p">:</span><span class="w"> </span><span class="l">select1</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">payload</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- {<span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;proxy3&#34;</span><span class="nt">, type</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;socks&#34;</span><span class="w"> </span>}<span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- {<span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;proxy4&#34;</span><span class="nt">, type</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;socks&#34;</span><span class="w"> </span>}<span class="w">
</span></span></span><span class="line"><span class="cl"><span class="nt">rules</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="l">MATCH,select2</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><h4 id="äººè¯">äººè¯
</h4><p>å¯ä»¥åœ¨ <code>proxies</code> é¡¹ä¸­æ·»åŠ  <code>dialer-proxy</code> å±æ€§ï¼Œå€¼ä¸ºå‡ºç«™ä»£ç†/ç­–ç•¥ç»„ï¼Œä»£è¡¨å°†å€¼ä½œä¸ºå‰ç½®ä»£ç†</p>
<p>å¯ä»¥åœ¨ <code>proxy-providers</code> çš„ <code>inline</code> é¡¹ä¸­æ·»åŠ  <code>override:dialer-proxy</code> å±æ€§ï¼Œå°†åç½®ä»£ç†æ·»åŠ åˆ° <code>payload</code> å±æ€§ä¸­</p>
<ul>
<li>
<p>é…ç½®èŠ‚ç‚¹</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">proxies</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;ss1&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">dialer-proxy</span><span class="p">:</span><span class="w"> </span><span class="l">dialer</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="l">...</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;ss2&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="l">...</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="nt">proxy-groups</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">dialer</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l">select</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">proxies</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span>- <span class="l">ss2</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="nt">rules</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span>- <span class="l">MATCH,ss1</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl"> å…§æ ¸ --&gt; ss1 --&gt; ss2åŒ…è£å™¨ --&gt; ss2 --&gt; ss2æœå‹™ç«¯ --&gt; ss1 --&gt; ss1æœå‹™ç«¯ --&gt; ç›®æ ‡
</span></span></code></pre></td></tr></table>
</div>
</div><p>æŒ‡å®šå½“å‰ <code>proxies</code> é€šè¿‡ <code>dialer-proxy</code> å»ºç«‹ç½‘ç»œè¿æ¥ï¼Œå€¼å¯ä»¥ä¸º<a class="link" href="https://wiki.metacubex.one/config/proxy-groups/"  target="_blank" rel="noopener"
    >ç­–ç•¥ç»„</a>/<a class="link" href="https://wiki.metacubex.one/config/proxies/"  target="_blank" rel="noopener"
    >å‡ºç«™ä»£ç†</a>çš„ <code>name</code></p>
<p>æœ€ç»ˆè¡¨ç°ï¼š</p>
<ul>
<li>æµè§ˆå™¨è®¿é—®IPæŸ¥è¯¢ç½‘ç«™æ—¶åªä¼šæ˜¾ç¤ºss1çš„IPï¼ˆå³ç›®æ ‡ç½‘ç«™ä¸çŸ¥é“ss2çš„å­˜åœ¨ï¼‰</li>
<li>å†…æ ¸å¯¹å¤–çœ‹èµ·æ¥åªæ˜¯åœ¨è®¿é—®ss2ï¼ˆå³ä½ çš„å®½å¸¦è¿è¥å•†ä¸çŸ¥é“ss1çš„å­˜åœ¨ï¼‰</li>
<li>åªæœ‰ss2çš„æœåŠ¡ç«¯çŸ¥é“åœ¨è®¿é—®ss1ï¼ˆss2çš„æœåŠ¡ç«¯ä¹ŸåªçŸ¥é“åœ¨è®¿é—®ss1ï¼Œå¹¶ä¸çŸ¥é“åœ¨è®¿é—®ä»€ä¹ˆç›®æ ‡ç½‘ç«™ï¼‰</li>
</ul>
</li>
<li>
<p>é…ç½®ç­–ç•¥ç»„</p>
</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">proxies</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- {<span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;proxy1&#34;</span><span class="nt">, type</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;socks&#34;</span><span class="w"> </span>}<span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- {<span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;proxy2&#34;</span><span class="nt">, type</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;socks&#34;</span><span class="w"> </span>}<span class="w">
</span></span></span><span class="line"><span class="cl"><span class="nt">proxy-groups</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- {<span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;select1&#34;</span><span class="nt">, type: select, proxies</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&#34;proxy1&#34;</span><span class="p">,</span><span class="w"> </span><span class="s2">&#34;proxy2&#34;</span><span class="p">]</span><span class="w"> </span>}<span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- {<span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;select2&#34;</span><span class="nt">, type: select, use</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&#34;provider1&#34;</span><span class="p">]</span><span class="w"> </span>}<span class="w">
</span></span></span><span class="line"><span class="cl"><span class="nt">proxy-providers</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">provider1</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l">inline</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">override</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">dialer-proxy</span><span class="p">:</span><span class="w"> </span><span class="l">select1</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">payload</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- {<span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;proxy3&#34;</span><span class="nt">, type</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;socks&#34;</span><span class="w"> </span>}<span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- {<span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;proxy4&#34;</span><span class="nt">, type</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;socks&#34;</span><span class="w"> </span>}<span class="w">
</span></span></span><span class="line"><span class="cl"><span class="nt">rules</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="l">MATCH,select2</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><h4 id="è¦†å†™">è¦†å†™
</h4><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">proxies+</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">302proxy_fixed</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">dialer-proxy</span><span class="p">:</span><span class="w"> </span><span class="l">dialer</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l">socks5</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">server</span><span class="p">:</span><span class="w"> </span><span class="l">XXX</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="m">3333</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">username</span><span class="p">:</span><span class="w"> </span><span class="l">XXX</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">password</span><span class="p">:</span><span class="w"> </span><span class="l">XXXXX</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="nt">proxy-groups+</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">dialer</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l">select</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">proxies</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="l">Hysteria2</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="l">Vless-Reality</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="l">Torjan</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">302proxy_fixip</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l">select</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">proxies</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="l">302proxy_fixed</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="nt">+rules</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="l">DOMAIN-KEYWORD,cursor,302proxy_fixip</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><h4 id="å¼ƒç½®æ–¹æ³•proxy-group">å¼ƒç½®æ–¹æ³•ï¼šproxy-group
</h4><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">Proxy Groups</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="c"># Traffic: Clash &lt;-&gt; http &lt;-&gt; vmess &lt;-&gt; ss1 &lt;-&gt; ss2 &lt;-&gt; Internet</span><span class="w">
</span></span></span><span class="line"><span class="cl">- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;relay&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l">relay</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">proxies</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span>- <span class="l">http</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span>- <span class="l">vmess</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span>- <span class="l">ss1</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span>- <span class="l">ss2</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>The traffic flow is Clash &lt;-&gt; http &lt;-&gt; vmess &lt;-&gt; ss1 &lt;-&gt; ss2 &lt;-&gt; Internet.</p>
<h3 id="è„šæœ¬">è„šæœ¬
</h3><h4 id="æ·»åŠ å‡ºç«™ä»£ç†">æ·»åŠ å‡ºç«™ä»£ç†
</h4><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="line"><span class="cl"><span class="c1">// Define main function (script entry)
</span></span></span><span class="line"><span class="cl"><span class="kd">function</span> <span class="nx">main</span><span class="p">(</span><span class="nx">config</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// === é…ç½®åŒºï¼šåœ¨è¿™é‡Œå®šä¹‰ä»»æ„æ•°é‡çš„è‡ªå®šä¹‰ SOCKS5 èŠ‚ç‚¹ ===
</span></span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">customNodes</span> <span class="o">=</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">name</span><span class="o">:</span> <span class="s2">&#34;1024proxy&#34;</span><span class="p">,</span>   <span class="c1">// èŠ‚ç‚¹æ˜¾ç¤ºåç§°ï¼ˆå¯è‡ªå®šä¹‰ï¼‰
</span></span></span><span class="line"><span class="cl">      <span class="nx">type</span><span class="o">:</span> <span class="s2">&#34;socks5&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nx">server</span><span class="o">:</span> <span class="s2">&#34;us.1024proxy.io&#34;</span><span class="p">,</span>           <span class="c1">// æœåŠ¡å™¨åœ°å€
</span></span></span><span class="line"><span class="cl">      <span class="nx">port</span><span class="o">:</span> <span class="mi">3000</span><span class="p">,</span>                    <span class="c1">// ç«¯å£
</span></span></span><span class="line"><span class="cl">      <span class="nx">udp</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>                     <span class="c1">// å¯ç”¨ UDPï¼ˆæ¨èï¼‰
</span></span></span><span class="line"><span class="cl">      <span class="nx">username</span><span class="o">:</span> <span class="s2">&#34;2nlo5364-region-US-asn-AS7018-sid-49euBkbk-t-120&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nx">password</span><span class="o">:</span> <span class="s2">&#34;k2i3j7xq&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// å¯ç»§ç»­æ·»åŠ æ›´å¤š...
</span></span></span><span class="line"><span class="cl">    <span class="c1">// {
</span></span></span><span class="line"><span class="cl">    <span class="c1">//   name: &#34;CustomLabel - Backup&#34;,
</span></span></span><span class="line"><span class="cl">    <span class="c1">//   type: &#34;socks5&#34;,
</span></span></span><span class="line"><span class="cl">    <span class="c1">//   server: &#34;192.168.1.100&#34;,
</span></span></span><span class="line"><span class="cl">    <span class="c1">//   port: 1080,
</span></span></span><span class="line"><span class="cl">    <span class="c1">//   udp: true,
</span></span></span><span class="line"><span class="cl">    <span class="c1">//   username: &#34;user&#34;,
</span></span></span><span class="line"><span class="cl">    <span class="c1">//   password: &#34;pass&#34;
</span></span></span><span class="line"><span class="cl">    <span class="c1">// }
</span></span></span><span class="line"><span class="cl">  <span class="p">];</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">// ç¡®ä¿ proxies æ˜¯æ•°ç»„
</span></span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nb">Array</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">config</span><span class="p">.</span><span class="nx">proxies</span><span class="p">))</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">config</span><span class="p">.</span><span class="nx">proxies</span> <span class="o">=</span> <span class="p">[];</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">// ç¡®ä¿ proxy-groups å­˜åœ¨ä¸”ä¸ºæ•°ç»„
</span></span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nb">Array</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">config</span><span class="p">[</span><span class="s2">&#34;proxy-groups&#34;</span><span class="p">])</span> <span class="o">||</span> <span class="nx">config</span><span class="p">[</span><span class="s2">&#34;proxy-groups&#34;</span><span class="p">].</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="nx">config</span><span class="p">;</span> <span class="c1">// æ— ä»£ç†ç»„ï¼Œç›´æ¥è¿”å›
</span></span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">firstGroup</span> <span class="o">=</span> <span class="nx">config</span><span class="p">[</span><span class="s2">&#34;proxy-groups&#34;</span><span class="p">][</span><span class="mi">0</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">// åªå¤„ç† select ç±»å‹çš„ä¸»ä»£ç†ç»„ï¼ˆé¿å…è¯¯æ”¹ fallback/url-testï¼‰
</span></span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="p">(</span><span class="nx">firstGroup</span><span class="p">.</span><span class="nx">type</span> <span class="o">!==</span> <span class="s2">&#34;select&#34;</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="nx">config</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">// ç¡®ä¿è¯¥åˆ†ç»„æœ‰ proxies å­—æ®µ
</span></span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nb">Array</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">firstGroup</span><span class="p">.</span><span class="nx">proxies</span><span class="p">))</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">firstGroup</span><span class="p">.</span><span class="nx">proxies</span> <span class="o">=</span> <span class="p">[];</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">groupProxies</span> <span class="o">=</span> <span class="nx">firstGroup</span><span class="p">.</span><span class="nx">proxies</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">// éå†æ‰€æœ‰è‡ªå®šä¹‰èŠ‚ç‚¹
</span></span></span><span class="line"><span class="cl">  <span class="k">for</span> <span class="p">(</span><span class="kr">const</span> <span class="nx">node</span> <span class="k">of</span> <span class="nx">customNodes</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kr">const</span> <span class="nx">nodeName</span> <span class="o">=</span> <span class="nx">node</span><span class="p">.</span><span class="nx">name</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// 1. æ·»åŠ åˆ°å…¨å±€ proxiesï¼ˆé¿å…é‡å¤ï¼‰
</span></span></span><span class="line"><span class="cl">    <span class="kr">const</span> <span class="nx">proxyExists</span> <span class="o">=</span> <span class="nx">config</span><span class="p">.</span><span class="nx">proxies</span><span class="p">.</span><span class="nx">some</span><span class="p">(</span><span class="nx">p</span> <span class="p">=&gt;</span> <span class="nx">p</span><span class="p">.</span><span class="nx">name</span> <span class="o">===</span> <span class="nx">nodeName</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">proxyExists</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">config</span><span class="p">.</span><span class="nx">proxies</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">node</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// 2. æ·»åŠ åˆ°ç¬¬ä¸€ä¸ªåˆ†ç»„æœ«å°¾ï¼ˆå…ˆå»é‡ï¼‰
</span></span></span><span class="line"><span class="cl">    <span class="kr">const</span> <span class="nx">idxInGroup</span> <span class="o">=</span> <span class="nx">groupProxies</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">nodeName</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="nx">idxInGroup</span> <span class="o">!==</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">groupProxies</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span><span class="nx">idxInGroup</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span> <span class="c1">// ç§»é™¤æ—§ä½ç½®
</span></span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="nx">groupProxies</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">nodeName</span><span class="p">);</span> <span class="c1">// æ’å…¥åˆ°æœ«å°¾
</span></span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="nx">config</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="singbox">SingBox
</h2><h3 id="é“¾å¼ä»£ç†-1">é“¾å¼ä»£ç†
</h3><h4 id="è„šæœ¬ç”Ÿæˆ">è„šæœ¬ç”Ÿæˆ
</h4><ul>
<li>ä»£ç </li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">onGenerate</span> <span class="o">=</span> <span class="kr">async</span> <span class="p">(</span><span class="nx">config</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">relayChains</span> <span class="o">=</span> <span class="p">[[</span><span class="s1">&#39;1024proxy&#39;</span><span class="p">,</span> <span class="s1">&#39;æ—¥æœ¬-ä¼˜åŒ–&#39;</span><span class="p">]];</span> <span class="c1">// ä»£ç†é“¾å®šä¹‰
</span></span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">excludeReg</span> <span class="o">=</span> <span class="sr">/selector|urltest/</span><span class="p">;</span> <span class="c1">// æ’é™¤åˆ†ç»„ç±»å‹
</span></span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">outsMap</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">fromEntries</span><span class="p">(</span><span class="nx">config</span><span class="p">.</span><span class="nx">outbounds</span><span class="p">.</span><span class="nx">map</span><span class="p">((</span><span class="nx">out</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">[</span><span class="nx">out</span><span class="p">.</span><span class="nx">tag</span><span class="p">,</span> <span class="nx">out</span><span class="p">]));</span> <span class="c1">// å°†æ‰€æœ‰å‡ºç«™è½¬æ¢ä¸ºä»¥ tag ä¸ºé”®çš„æ˜ å°„
</span></span></span><span class="line"><span class="cl">  <span class="c1">// è¯†åˆ«åˆ†ç»„ä¸­åŒ…å«çš„å®é™…å‡ºç«™æˆå‘˜
</span></span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">groupMembers</span> <span class="o">=</span> <span class="p">{};</span>
</span></span><span class="line"><span class="cl">  <span class="k">for</span> <span class="p">(</span><span class="kr">const</span> <span class="nx">out</span> <span class="k">of</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">values</span><span class="p">(</span><span class="nx">outsMap</span><span class="p">))</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// ä»…å¤„ç†æœ‰æ•ˆçš„ä¸”æ˜¯åˆ†ç»„ç±»å‹çš„å‡ºç«™
</span></span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">out</span><span class="o">?</span><span class="p">.</span><span class="nx">tag</span> <span class="o">||</span> <span class="o">!</span><span class="nx">excludeReg</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">out</span><span class="p">.</span><span class="nx">type</span><span class="p">))</span> <span class="k">continue</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kr">const</span> <span class="nx">membersSet</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Set</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="p">(</span><span class="kr">const</span> <span class="nx">candidate</span> <span class="k">of</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">values</span><span class="p">(</span><span class="nx">outsMap</span><span class="p">))</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="c1">// ä»…å¤„ç†æœ‰æ•ˆçš„ä¸”éè‡ªèº«å‡ºç«™
</span></span></span><span class="line"><span class="cl">      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">candidate</span><span class="o">?</span><span class="p">.</span><span class="nx">tag</span> <span class="o">||</span> <span class="nx">candidate</span><span class="p">.</span><span class="nx">tag</span> <span class="o">===</span> <span class="nx">out</span><span class="p">.</span><span class="nx">tag</span><span class="p">)</span> <span class="k">continue</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="k">try</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// é€šè¿‡ JSON å­—ç¬¦ä¸²åŒ…å«å…³ç³»åˆ¤æ–­æ˜¯å¦ä¸ºåˆ†ç»„æˆå‘˜
</span></span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">out</span><span class="p">).</span><span class="nx">includes</span><span class="p">(</span><span class="s1">&#39;&#34;&#39;</span> <span class="o">+</span> <span class="nx">candidate</span><span class="p">.</span><span class="nx">tag</span> <span class="o">+</span> <span class="s1">&#39;&#34;&#39;</span><span class="p">))</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">          <span class="nx">membersSet</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">candidate</span><span class="p">.</span><span class="nx">tag</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// å¿½ç•¥åºåˆ—åŒ–é”™è¯¯ï¼Œä¸å½±å“é€»è¾‘
</span></span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="nx">groupMembers</span><span class="p">[</span><span class="nx">out</span><span class="p">.</span><span class="nx">tag</span><span class="p">]</span> <span class="o">=</span> <span class="nb">Array</span><span class="p">.</span><span class="nx">from</span><span class="p">(</span><span class="nx">membersSet</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// éå†ä»£ç†é“¾å¹¶è®¾ç½®ä¸Šæ¸¸å‡ºç«™
</span></span></span><span class="line"><span class="cl">  <span class="nx">relayChains</span><span class="p">.</span><span class="nx">forEach</span><span class="p">((</span><span class="nx">chain</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">chain</span><span class="p">.</span><span class="nx">forEach</span><span class="p">((</span><span class="nx">tag</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">arr</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="c1">// é“¾çš„æœ€åä¸€ä¸ªå‡ºç«™ä¸éœ€è¦è®¾ç½®ä¸Šæ¸¸
</span></span></span><span class="line"><span class="cl">      <span class="k">if</span> <span class="p">(</span><span class="nx">i</span> <span class="o">===</span> <span class="nx">arr</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="kr">const</span> <span class="nx">out</span> <span class="o">=</span> <span class="nx">outsMap</span><span class="p">[</span><span class="nx">tag</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">      <span class="kr">const</span> <span class="nx">upStream</span> <span class="o">=</span> <span class="nx">arr</span><span class="p">[</span><span class="nx">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">];</span> <span class="c1">// ä¸‹ä¸€ä¸ªå‡ºç«™ä½œä¸ºå½“å‰å‡ºç«™çš„ä¸Šæ¸¸
</span></span></span><span class="line"><span class="cl">      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">out</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">throw</span> <span class="sb">`é”™è¯¯ï¼šå½“å‰é…ç½®å†…æœªæ‰¾åˆ°å‡ºç«™ </span><span class="si">${</span><span class="nx">tag</span><span class="si">}</span><span class="sb">`</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">      <span class="c1">// æ ¹æ®å‡ºç«™ç±»å‹è¿›è¡Œå¤„ç†
</span></span></span><span class="line"><span class="cl">      <span class="k">if</span> <span class="p">(</span><span class="nx">excludeReg</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">out</span><span class="p">.</span><span class="nx">type</span><span class="p">))</span> <span class="p">{</span> <span class="c1">// å¦‚æœæ˜¯åˆ†ç»„ç±»å‹ï¼ˆselector æˆ– urltestï¼‰
</span></span></span><span class="line"><span class="cl">        <span class="kr">const</span> <span class="nx">members</span> <span class="o">=</span> <span class="nx">groupMembers</span><span class="p">[</span><span class="nx">tag</span><span class="p">]</span> <span class="o">||</span> <span class="p">[];</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// æ£€æŸ¥åˆ†ç»„æ˜¯å¦æœ‰è¯†åˆ«åˆ°çš„æˆå‘˜
</span></span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">members</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">          <span class="k">throw</span> <span class="sb">`é”™è¯¯ï¼šåˆ†ç»„ </span><span class="si">${</span><span class="nx">tag</span><span class="si">}</span><span class="sb"> æœªè¯†åˆ«åˆ°å¯ç”¨æˆå‘˜ï¼Œè¯·æ£€æŸ¥é…ç½®`</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="nx">members</span><span class="p">.</span><span class="nx">forEach</span><span class="p">((</span><span class="nx">mTag</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">          <span class="c1">// å¦‚æœæˆå‘˜è‡ªèº«å°±æ˜¯ä¸Šæ¸¸ï¼Œåˆ™è·³è¿‡ï¼Œé¿å…è‡ªå¾ªç¯ 
</span></span></span><span class="line"><span class="cl">          <span class="k">if</span> <span class="p">(</span><span class="nx">mTag</span> <span class="o">===</span> <span class="nx">upStream</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">Plugins</span><span class="p">.</span><span class="nx">message</span><span class="p">.</span><span class="nx">warn</span><span class="p">(</span><span class="sb">`è­¦å‘Šï¼šåˆ†ç»„ </span><span class="si">${</span><span class="nx">tag</span><span class="si">}</span><span class="sb"> çš„æˆå‘˜ </span><span class="si">${</span><span class="nx">mTag</span><span class="si">}</span><span class="sb"> ä¸Šæ¸¸ä¸å…¶è‡ªèº«ä¸€è‡´ï¼Œå·²è·³è¿‡è®¾ç½®ã€‚`</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">          <span class="p">}</span>
</span></span><span class="line"><span class="cl">          <span class="kr">const</span> <span class="nx">mOut</span> <span class="o">=</span> <span class="nx">outsMap</span><span class="p">[</span><span class="nx">mTag</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">          <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">mOut</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">throw</span> <span class="sb">`é”™è¯¯ï¼šå½“å‰é…ç½®å†…æœªæ‰¾åˆ°å‡ºç«™ </span><span class="si">${</span><span class="nx">mTag</span><span class="si">}</span><span class="sb">ï¼ˆå±äºåˆ†ç»„ </span><span class="si">${</span><span class="nx">tag</span><span class="si">}</span><span class="sb">ï¼‰`</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">          <span class="p">}</span>
</span></span><span class="line"><span class="cl">          <span class="c1">// ä»…ä¸ºéåˆ†ç»„ä¸”é direct/block ç±»å‹çš„æˆå‘˜è®¾ç½®ä¸Šæ¸¸
</span></span></span><span class="line"><span class="cl">          <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">excludeReg</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">mOut</span><span class="p">.</span><span class="nx">type</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="p">[</span><span class="s1">&#39;direct&#39;</span><span class="p">,</span> <span class="s1">&#39;block&#39;</span><span class="p">].</span><span class="nx">includes</span><span class="p">(</span><span class="nx">mOut</span><span class="p">.</span><span class="nx">type</span><span class="p">))</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">mOut</span><span class="p">.</span><span class="nx">detour</span> <span class="o">=</span> <span class="nx">upStream</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">          <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">});</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span> <span class="c1">// å¦‚æœæ˜¯æ™®é€šå‡ºç«™ç±»å‹
</span></span></span><span class="line"><span class="cl">        <span class="c1">// æ’é™¤ direct/block ç±»å‹ï¼Œå®ƒä»¬ä¸å¯è®¾ç½®ä¸Šæ¸¸
</span></span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">([</span><span class="s1">&#39;direct&#39;</span><span class="p">,</span> <span class="s1">&#39;block&#39;</span><span class="p">].</span><span class="nx">includes</span><span class="p">(</span><span class="nx">out</span><span class="p">.</span><span class="nx">type</span><span class="p">))</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">          <span class="k">throw</span> <span class="sb">`é”™è¯¯ï¼šå‡ºç«™ </span><span class="si">${</span><span class="nx">out</span><span class="p">.</span><span class="nx">tag</span><span class="si">}</span><span class="sb"> ç±»å‹ä¸å¯è®¾ç½®ä¸Šæ¸¸`</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// æ™®é€šå‡ºç«™çš„ä¸Šæ¸¸ä¸èƒ½æ˜¯è‡ªèº«
</span></span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="nx">tag</span> <span class="o">===</span> <span class="nx">upStream</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">          <span class="k">throw</span> <span class="sb">`é”™è¯¯ï¼šå‡ºç«™ </span><span class="si">${</span><span class="nx">out</span><span class="p">.</span><span class="nx">tag</span><span class="si">}</span><span class="sb"> çš„ä¸Šæ¸¸ä¸èƒ½æ˜¯è‡ªèº«ï¼Œè¯·æ£€æŸ¥ä»£ç†é“¾é…ç½®ã€‚`</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="nx">out</span><span class="p">.</span><span class="nx">detour</span> <span class="o">=</span> <span class="nx">upStream</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">});</span>
</span></span><span class="line"><span class="cl">  <span class="p">});</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="nx">config</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>æµç¨‹å›¾</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">flowchart TD
</span></span><span class="line"><span class="cl">    A([å¼€å§‹]) --&gt; B[&#34;åˆå§‹åŒ–é…ç½®\nrelayChains = [[&#39;1024proxy&#39;, &#39;æ—¥æœ¬-ä¼˜åŒ–&#39;]]\nexcludeReg = /selector|urltest/&#34;]
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    B --&gt; C[&#34;æ„å»º outsMap:\nä»¥ outbounds.tag ä¸ºé”®çš„æ˜ å°„&#34;]
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    C --&gt; D{&#34;éå†æ‰€æœ‰ outbounds\næ˜¯å¦ä¸ºåˆ†ç»„ç±»å‹?&#34;}
</span></span><span class="line"><span class="cl">    D -- æ˜¯ --&gt; E[&#34;æ£€æŸ¥ JSON æ˜¯å¦åŒ…å«å…¶ä»– tag\næ”¶é›†æˆå‘˜åˆ° groupMembers[tag]&#34;]
</span></span><span class="line"><span class="cl">    D -- å¦ --&gt; F[è·³è¿‡]
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    E --&gt; G
</span></span><span class="line"><span class="cl">    F --&gt; G
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    G[&#34;å®Œæˆ groupMembers æ„å»º&#34;] --&gt; H{&#34;éå† relayChains\næ¯æ¡é“¾ chain&#34;}
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    H --&gt; I{&#34;éå† chain ä¸­æ¯ä¸ª tag\n(i == chain.length - 1?)&#34;}
</span></span><span class="line"><span class="cl">    I -- æ˜¯ --&gt; J[è·³è¿‡ï¼ˆé“¾å°¾æ— ä¸Šæ¸¸ï¼‰]
</span></span><span class="line"><span class="cl">    I -- å¦ --&gt; K[&#34;è·å–å½“å‰ out = outsMap[tag]\nupStream = chain[i+1]&#34;]
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    K --&gt; L{&#34;out.type æ˜¯\nselector/urltest?&#34;}
</span></span><span class="line"><span class="cl">    L -- æ˜¯ --&gt; M{&#34;groupMembers[tag]\næœ‰æˆå‘˜?&#34;}
</span></span><span class="line"><span class="cl">    M -- å¦ --&gt; N[&#34;æŠ›å‡ºé”™è¯¯ï¼š\nåˆ†ç»„æ— æˆå‘˜&#34;]
</span></span><span class="line"><span class="cl">    M -- æ˜¯ --&gt; O[&#34;éå†æ¯ä¸ªæˆå‘˜ mTag&#34;]
</span></span><span class="line"><span class="cl">    O --&gt; P{&#34;mTag === upStream?&#34;}
</span></span><span class="line"><span class="cl">    P -- æ˜¯ --&gt; Q[&#34;è­¦å‘Šå¹¶è·³è¿‡\nï¼ˆé˜²è‡ªå¾ªç¯ï¼‰&#34;]
</span></span><span class="line"><span class="cl">    P -- å¦ --&gt; R[&#34;è·å– mOut = outsMap[mTag]&#34;]
</span></span><span class="line"><span class="cl">    R --&gt; S{&#34;mOut æ˜¯æ™®é€šä»£ç†?\n(éåˆ†ç»„ã€é direct/block)&#34;}
</span></span><span class="line"><span class="cl">    S -- æ˜¯ --&gt; T[&#34;è®¾ç½® mOut.detour = upStream&#34;]
</span></span><span class="line"><span class="cl">    S -- å¦ --&gt; U[è·³è¿‡]
</span></span><span class="line"><span class="cl">    T --&gt; V
</span></span><span class="line"><span class="cl">    Q --&gt; V
</span></span><span class="line"><span class="cl">    U --&gt; V
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    L -- å¦ --&gt; W{&#34;out.type æ˜¯\ndirect æˆ– block?&#34;}
</span></span><span class="line"><span class="cl">    W -- æ˜¯ --&gt; X[&#34;æŠ›å‡ºé”™è¯¯ï¼š\nä¸å¯è®¾ä¸Šæ¸¸&#34;]
</span></span><span class="line"><span class="cl">    W -- å¦ --&gt; Y{&#34;tag === upStream?&#34;}
</span></span><span class="line"><span class="cl">    Y -- æ˜¯ --&gt; Z[&#34;æŠ›å‡ºé”™è¯¯ï¼š\nä¸èƒ½è‡ªæŒ‡&#34;]
</span></span><span class="line"><span class="cl">    Y -- å¦ --&gt; AA[&#34;è®¾ç½® out.detour = upStream&#34;]
</span></span><span class="line"><span class="cl">    AA --&gt; V
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    V --&gt; AB{&#34;chain éå†å®Œæˆ?&#34;}
</span></span><span class="line"><span class="cl">    AB -- å¦ --&gt; I
</span></span><span class="line"><span class="cl">    AB -- æ˜¯ --&gt; AC{&#34;æ‰€æœ‰ relayChains\nå¤„ç†å®Œ?&#34;}
</span></span><span class="line"><span class="cl">    AC -- å¦ --&gt; H
</span></span><span class="line"><span class="cl">    AC -- æ˜¯ --&gt; AD[&#34;è¿”å›ä¿®æ”¹åçš„ config&#34;]
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    J --&gt; AB
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    N --&gt; AE([ç»“æŸ - æŠ¥é”™])
</span></span><span class="line"><span class="cl">    X --&gt; AE
</span></span><span class="line"><span class="cl">    Z --&gt; AE
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    AD --&gt; AF([ç»“æŸ - æˆåŠŸ])
</span></span></code></pre></td></tr></table>
</div>
</div>
</section>


    <footer class="article-footer">
    

    
    <section class="article-copyright">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <path d="M14.5 9a3.5 4 0 1 0 0 6" />
</svg>



        <span>é‡‡ç”¨ CC BY-NC-SA 4.0 è®¸å¯</span>
    </section>
    </footer>


    
</article>

    

    

     
    
        
    <script src="//cdn.jsdelivr.net/npm/twikoo@1.6.44/dist/twikoo.all.min.js"></script>
<div id="tcomment"></div>
<style>
    .twikoo {
        background-color: var(--card-background);
        border-radius: var(--card-border-radius);
        box-shadow: var(--shadow-l1);
        padding: var(--card-padding);
    }
    :root[data-scheme="dark"] {
        --twikoo-body-text-color-main: rgba(255, 255, 255, 0.9);
        --twikoo-body-text-color: rgba(255, 255, 255, 0.7);
    }
    .twikoo .el-input-group__prepend,
    .twikoo .tk-action-icon,
    .twikoo .tk-submit-action-icon,
    .twikoo .tk-time,
    .twikoo .tk-comments-no,
    .twikoo .tk-comments-count {
        color: var(--twikoo-body-text-color);
    }
    .twikoo .el-input__inner,
    .twikoo .el-textarea__inner,
    .twikoo .tk-preview-container,
    .twikoo .tk-content,
    .twikoo .tk-nick,
    .twikoo .tk-send,
    .twikoo .tk-comments-no,
    .twikoo .el-input__count,
    .twikoo .tk-submit-action-icon {
        color: var(--twikoo-body-text-color-main)!important;
    }
    .twikoo .el-button{
        color: var(--twikoo-body-text-color)!important;
    }
    .twikoo .el-input__count {
        color: var(--twikoo-body-text-color) !important;
    }
    .OwO .OwO-body {
        background-color: var(--body-background) !important;
        color: var(--body-text-color) !important;
    }
</style><script>
    twikoo.init({
        envId: 'https:\/\/wc-redeem-twikoo.netlify.app',
        el: '#tcomment',lang: 'zh-cn',})
</script>

    

    <footer class="site-footer">
    <section class="copyright">
        &copy; 
        
            2025 - 
        
        2026 WindoveC
    </section>
    
    <section class="powerby">
        
            ä¸€ä¸ªéšå¿ƒäººçš„è‡ªæˆ‘æ•‘èµ <br/>
        ä½¿ç”¨ <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> æ„å»º <br />
        ä¸»é¢˜ <b><a href="https://github.com/CaiJimmy/hugo-theme-stack" target="_blank" rel="noopener" data-version="3.32.0">Stack</a></b> ç”± <a href="https://jimmycai.com" target="_blank" rel="noopener">Jimmy</a> è®¾è®¡
    </section>
</footer>


    
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    
    <div class="pswp__bg"></div>

    
    <div class="pswp__scroll-wrap">

        
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                
                
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo="crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU="crossorigin="anonymous"
                defer
                >
            </script><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css"crossorigin="anonymous"
            ><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css"crossorigin="anonymous"
            >

            </main>
        </div>
        <script 
                src="https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js"integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z&#43;KMkF24hUW8WePSA9HM="crossorigin="anonymous"
                
                >
            </script><script type="text/javascript" src="/redeem/ts/main.c922af694cc257bf1ecc41c0dd7b0430f9114ec280ccf67cd2c6ad55f5316c4e.js" defer></script>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>

    </body>
</html>
